<div id="main-container">
  <mat-toolbar class="mat-elevation-z8">
    <h2>Employees List</h2>
    <app-column-selector id="column_selector"
                         [referenceColumns]="referenceColumns"
                         [displayedColumns]="displayedColumns"
    ></app-column-selector>
  </mat-toolbar>

  <mat-table #table [dataSource]="dataSource" class="mat-elevation-z8">

    <ng-container matColumnDef="employeeId">
      <mat-header-cell *matHeaderCellDef>Employee ID</mat-header-cell>
      <mat-cell *matCellDef="let employee"> {{employee.employeeId}} </mat-cell>
    </ng-container>

    <ng-container matColumnDef="firstname">
      <mat-header-cell *matHeaderCellDef>First Name</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.firstname">
          {{employee.firstname}}
        </ng-container>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="lastname">
      <mat-header-cell *matHeaderCellDef>Last Name</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.lastname">
          {{employee.lastname}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="active">
      <mat-header-cell *matHeaderCellDef>Active</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.active">
          {{employee.active}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="deletedBy">
      <mat-header-cell *matHeaderCellDef>Deleted By</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.deletedBy">
          {{employee.deletedBy}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="address">
      <mat-header-cell *matHeaderCellDef>Address</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.address">
          {{employee.address}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="gender">
      <mat-header-cell *matHeaderCellDef>Gender</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.gender">
          {{employee.gender}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="birthday">
      <mat-header-cell *matHeaderCellDef>Birthday</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.birthday">
          {{employee.birthday}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="ssin">
      <mat-header-cell *matHeaderCellDef>Ssin</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.ssin">
          {{employee.ssin}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="status">
      <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.status">
          {{employee.status}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="deleted">
      <mat-header-cell *matHeaderCellDef>Deleted</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.deleted">
          {{employee.deleted}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="company">
      <mat-header-cell *matHeaderCellDef>Company</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.company">
          {{employee.company.name}}
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="skills">
      <mat-header-cell *matHeaderCellDef>Skills</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.skills">
          <ng-container *ngFor="let skill of employee.skills">
            {{skill.name}} <br>
          </ng-container>
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="timesheets">
      <mat-header-cell *matHeaderCellDef>Timesheets</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.timesheets">
          <ng-container *ngFor="let timesheet of employee.timesheets">
            {{timesheet.timesheetType}} <br>
          </ng-container>
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="documents">
      <mat-header-cell *matHeaderCellDef>Documents</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.documents">
          <ng-container *ngFor="let document of employee.documents">
            {{document.name}} <br>
          </ng-container>
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="contracts">
      <mat-header-cell *matHeaderCellDef>Contracts</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.contracts">
          <ng-container *ngFor="let contract of employee.contracts">
            {{contract.description}} <br>
          </ng-container>
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="fleets">
      <mat-header-cell *matHeaderCellDef>Fleets</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.fleets">
          <ng-container *ngFor="let fleet of employee.fleets">
            {{fleet.name}} <br>
          </ng-container>
        </ng-container>
      </mat-cell>
    </ng-container>

    <ng-container matColumnDef="salaries">
      <mat-header-cell *matHeaderCellDef>Salaries</mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <ng-container *ngIf="employee.salaries">
          <ng-container *ngFor="let salary of employee.salaries">
            {{salary.name}} <br>
          </ng-container>
        </ng-container>
      </mat-cell>
    </ng-container>


    <ng-container matColumnDef="option">
      <mat-header-cell *matHeaderCellDef></mat-header-cell>
      <mat-cell *matCellDef="let employee">
        <button mat-icon-button matTooltip="Detail"
                (click)="openDetailEmployeeDialog(employee)"
        >
          <mat-icon>visibility</mat-icon>
        </button>

        <button mat-icon-button matTooltip="Edit"
                [routerLink]="['edit/' + employee.employeeId]"
        >
          <mat-icon>edit_square</mat-icon>
        </button>

        <button mat-icon-button [matMenuTriggerFor]="menu_delete" matTooltip="Delete" id="iconList2" class="iconButton">
          <mat-icon>close</mat-icon>
        </button>
        <mat-menu #menu_delete="matMenu">
          <p >Confirm :</p>
          <button mat-menu-item (click)="delete(employee)"> Yes </button>
          <button mat-menu-item> No </button>
        </mat-menu>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let employee; columns: displayedColumns;"></mat-row>

  </mat-table>

  <mat-paginator #paginator
                 id="paginator"
                 class ="mat-elevation-z8"
                 [length]="employeeList.length"
                 [pageSize]="10"
                 [pageSizeOptions]="[10,20,50,100,500]"
                 aria-label="Select page"
  ></mat-paginator>

</div>

<a [routerLink]="['insert']">
  <button mat-raised-button color="primary"
          id="AddButton"
  >
    Add
  </button>
</a>
